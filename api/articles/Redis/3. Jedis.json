{"title":"3. Jedis","uid":"db7ea4437a64676d67da146e8befffea","slug":"Redis/3. Jedis","date":"2021-10-20T14:49:23.000Z","updated":"2021-10-20T15:42:22.902Z","comments":true,"path":"api/articles/Redis/3. Jedis.json","keywords":null,"cover":"/images/default-cover.jpg","content":"<p><strong>依赖</strong></p>\n<pre class=\"line-numbers language-xml\" data-language=\"xml\"><code class=\"language-xml\">&lt;dependency&gt;\n    &lt;groupId&gt;redis.clients&lt;&#x2F;groupId&gt;\n    &lt;artifactId&gt;jedis&lt;&#x2F;artifactId&gt;\n    &lt;version&gt;3.6.1&lt;&#x2F;version&gt;\n&lt;&#x2F;dependency&gt;</code></pre>\n\n<p><strong>连接使用</strong></p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">public class Ping &#123;\n\n    public static void main(String[] args) &#123;\n        &#x2F;&#x2F;1. new Jedis就建立连接\n        Jedis jedis &#x3D; new Jedis(&quot;127.0.0.1&quot;, 6379);\n\n        System.out.println(jedis.ping());\n    &#125;\n\n&#125;</code></pre>\n\n<p>==Jedis所有API都与Redis命令一模一样==</p>\n<p>事务</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">public class Transaction &#123;\n    public static void main(String[] args) &#123;\n        Jedis jedis &#x3D; new Jedis(&quot;127.0.0.1&quot;, 6379);\n        System.out.println(jedis.flushDB());\n\n        Map&lt;String,String&gt; user &#x3D; new HashMap&lt;&gt;();\n        user.put(&quot;name&quot;,&quot;doubly&quot;);\n        user.put(&quot;hello&quot;,&quot;world&quot;);\n        String jsonStr &#x3D; JSONUtil.toJsonStr(user);\n\n        redis.clients.jedis.Transaction multi &#x3D; jedis.multi();\n        try &#123;\n            multi.set(&quot;user1&quot;, jsonStr);\n            multi.set(&quot;user2&quot;, jsonStr);\n            &#x2F;&#x2F;执行事务\n            multi.exec();\n        &#125;catch (Exception ex)&#123;\n            &#x2F;&#x2F; 放弃事务\n            multi.discard();\n            ex.printStackTrace();\n        &#125;finally &#123;\n            System.out.println(jedis.get(&quot;user1&quot;));\n            System.out.println(jedis.get(&quot;user2&quot;));\n\n            &#x2F;&#x2F;关闭连接\n            jedis.close();\n        &#125;\n    &#125;\n&#125;</code></pre>\n\n<p>乐观锁</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\">public class OptimisticLock &#123;\n\n    public static void main(String[] args) &#123;\n        Jedis jedis &#x3D; new Jedis(&quot;127.0.0.1&quot;,6379);\n\n        System.out.println(jedis.flushDB());\n\n        jedis.set(&quot;money&quot;,&quot;100&quot;);\n        jedis.set(&quot;out&quot;,&quot;0&quot;);\n\n        jedis.watch(&quot;money&quot;);\n        Transaction multi &#x3D; jedis.multi();\n\n        try&#123;\n            multi.incrBy(&quot;out&quot;,10);\n            multi.decrBy(&quot;money&quot;,10);\n\n            int i &#x3D; 1&#x2F;0;\n\n            multi.exec();\n            System.out.println(&quot;事务执行完成&quot;);\n        &#125;catch (Exception ex)&#123;\n            System.out.println(&quot;放弃事务&quot;);\n            System.out.println(multi.discard());\n            ex.printStackTrace();\n        &#125;finally &#123;\n            System.out.println(jedis.get(&quot;money&quot;));\n            System.out.println(jedis.get(&quot;out&quot;));\n            jedis.close();\n        &#125;\n\n    &#125;\n&#125;</code></pre>","text":"依赖 &lt;dependency&gt; &lt;groupId&gt;redis.clients&lt;&#x2F;groupId&gt; &lt;artifactId&gt;jedis&lt;&#x2F;artifactId&gt; &lt;version&gt;3.6.1...","link":"","photos":[],"count_time":{"symbolsCount":"2.5k","symbolsTime":"2 mins."},"categories":[{"name":"Redis","slug":"Redis","count":10,"path":"api/categories/Redis.json"}],"tags":[{"name":"Redis","slug":"Redis","count":10,"path":"api/tags/Redis.json"}],"toc":"","author":{"name":"小益子","slug":"blog-author","avatar":"/images/HeadPhoto.jpg","link":"/","description":"小益子的个人博客","socials":{"github":"https://github.com/doubly-yi","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_18335837","juejin":"","customs":{"gitee":{"icon":"/icons/gitee2.svg","link":"https://gitee.com/doubly"},"bilibili":{"icon":"/icons/bilibili.svg","link":"https://space.bilibili.com/294694129"}}}},"mapped":true,"prev_post":{"title":"4. Redis整合SpringBoot.md","uid":"269d526417b005df367f7ce3a1296fbf","slug":"Redis/4. Redis整合SpringBoot","date":"2021-10-20T14:49:24.000Z","updated":"2021-10-20T15:42:30.500Z","comments":true,"path":"api/articles/Redis/4. Redis整合SpringBoot.json","keywords":null,"cover":"/images/default-cover.jpg","text":"依赖 &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt; &lt;artifactId&gt;spring-boot-starte...","link":"","photos":[],"count_time":{"symbolsCount":"23k","symbolsTime":"21 mins."},"categories":[{"name":"Redis","slug":"Redis","count":10,"path":"api/categories/Redis.json"}],"tags":[{"name":"Redis","slug":"Redis","count":10,"path":"api/tags/Redis.json"}],"author":{"name":"小益子","slug":"blog-author","avatar":"/images/HeadPhoto.jpg","link":"/","description":"小益子的个人博客","socials":{"github":"https://github.com/doubly-yi","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_18335837","juejin":"","customs":{"gitee":{"icon":"/icons/gitee2.svg","link":"https://gitee.com/doubly"},"bilibili":{"icon":"/icons/bilibili.svg","link":"https://space.bilibili.com/294694129"}}}}},"next_post":{"title":"2. Redis事务","uid":"ec09385bf6fd223c8e8314533a8c47e9","slug":"Redis/2. Redis事务","date":"2021-10-20T14:49:22.000Z","updated":"2021-10-20T15:42:16.478Z","comments":true,"path":"api/articles/Redis/2. Redis事务.json","keywords":null,"cover":"/images/default-cover.jpg","text":" Redis事务本质 一组命令的集合！一个事务中的所有命令都会被序列化，在事务执行过程中，会按照顺序执行 Redis事务特点 一次性 顺序性 排他性 ==Redis单条命令是保证原子性的，但是事务不保证原子性。== ==Redis事务没有隔离级别的概念== 事务执行命令 127....","link":"","photos":[],"count_time":{"symbolsCount":"2.1k","symbolsTime":"2 mins."},"categories":[{"name":"Redis","slug":"Redis","count":10,"path":"api/categories/Redis.json"}],"tags":[{"name":"Redis","slug":"Redis","count":10,"path":"api/tags/Redis.json"}],"author":{"name":"小益子","slug":"blog-author","avatar":"/images/HeadPhoto.jpg","link":"/","description":"小益子的个人博客","socials":{"github":"https://github.com/doubly-yi","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_18335837","juejin":"","customs":{"gitee":{"icon":"/icons/gitee2.svg","link":"https://gitee.com/doubly"},"bilibili":{"icon":"/icons/bilibili.svg","link":"https://space.bilibili.com/294694129"}}}}}}